\documentclass{article}
\pagestyle{empty}
\usepackage[margin=1mm,paperwidth=13cm, paperheight=9cm]{geometry} % no margins
\usepackage{tikz}
\usepackage{pgfplots}
\usepackage{boolexpr,pdftexcmds}
\long\def\isequal#1#2{\pdfstrcmp{#1}{#2}}
%\pgfplotsset{compat=1.8}
\usetikzlibrary{arrows,shapes,automata,positioning,shapes.multipart}
\usetikzlibrary{plotmarks}

\pgfdeclareplotmark{instruction}
{\draw (0,0)  node[minimum height=0.6cm,minimum width=0.1cm, draw, fill] {};}
\pgfdeclareplotmark{instructionAES128}
{\draw[line width=0.3pt] (0,-4.5) --(0,4.5);}
\pgfdeclareplotmark{instructionAES192}
{\draw[line width=0.3pt] (0,-4.5) --(0,4.5);}
\pgfdeclareplotmark{instructionAES256}
{\draw[line width=0.3pt] (0,-4.5) --(0,4.5);}
\pgfdeclareplotmark{instructionDES}
{\draw (0,0)  node[inner xsep=0.9pt, inner ysep= 2.5pt,draw=none, fill] {};}
\pgfdeclareplotmark{instructionCamellia}
{\draw (0,0)  node[inner xsep=0.9pt, inner ysep= 2.1pt,draw=none, fill] {};}
\pgfdeclareplotmark{instruction3DES}
{\draw[line width=0.4pt] (0,-4.5) --(0,4.5);}
\pgfdeclareplotmark{instructionSerpent}
{\draw (0,0)  node[inner xsep=0.8pt, inner ysep= 1.1pt, draw=none, fill] {};}
\pgfdeclareplotmark{instructionCAST}
{\draw (0,0)  node[inner xsep=1.9pt, inner ysep= 2.3pt, draw=none, fill] {};}
\pgfdeclareplotmark{instructionGOST}
{\draw (0,0)  node[inner xsep=1.6pt, inner ysep= 1pt, draw=none, fill] {};}

\def \stdbits {\pgfplotsset{colorbar style={ytick={{1,32,64,96,128,160,192,224,256}},width=0.25cm, at={(1.07,1)}, anchor=north west}}}
\def \camelliabits {\pgfplotsset{colorbar style={ytick={{1,32,64,96,128}},width=0.25cm, at={(1.07,1)}, anchor=north west}}}
\def \desbits {\pgfplotsset{colorbar style={ytick={{1,16,32,48,56}},width=0.25cm, at={(1.07,1)}, anchor=north west}}}
\def \desxbits {\pgfplotsset{colorbar style={ytick={{1,32,64,96,128}},width=0.25cm, at={(1.07,1)}, anchor=north west}}}
\def \tdesbits {\pgfplotsset{colorbar style={ytick={{1,32,64,96,112}},width=0.25cm, at={(1.07,1)}, anchor=north west}}}
\def \tdesfullbits {\pgfplotsset{colorbar style={ytick={{1,32,64,96,128,160,168}},width=0.25cm, at={(1.07,1)}, anchor=north west}}}
\def \stdrounds {\pgfplotsset{ytick={0,2,...,40}}}
\def \highrounds {\pgfplotsset{ytick={0,4,...,32}}}


\begin{document}

\stdrounds
\stdbits
\def \mark {instruction}
\ifcase\boolexpr{ \isequal{\filename}{prot_dpa.dat} \OR \isequal{\filename}{backward.dat} \OR \isequal{\filename}{forward.dat} \OR \isequal{\filename}{nonlinbit.dat} \OR \isequal{\filename}{nonlinbyte.dat}}
	\switch
	\case{\isequal{\currentalgo}{aes128}}
		\def \mark {instructionAES128}
 	\case{\isequal{\currentalgo}{aes192}}
		\def \mark {instructionAES192}
	\case{\isequal{\currentalgo}{aes256}}
		\def \mark {instructionAES256}
	\case{\isequal{\currentalgo}{des}}
		\desbits
		\def \mark {instructionDES}
	\case{\isequal{\currentalgo}{desx}}
		\desxbits
		\def \mark {instructionDES}
	\case{\isequal{\currentalgo}{3des2} \OR \isequal{\currentalgo}{3des3}}
		\def \mark {instruction3DES}
		\ifcase\boolexpr{\isequal{\filename}{backward.dat} \OR \isequal{\filename}{forward.dat} \OR \isequal{\filename}{nonlinbit.dat} }
			\tdesfullbits
		\else
			\tdesbits
		\fi
	\case{\isequal{\currentalgo}{gost}}
		\highrounds
		\def \mark {instructionGOST}
	\case{\isequal{\currentalgo}{camellia}}
		\camelliabits
		\def \mark {instructionCamellia}
	\case{\isequal{\currentalgo}{cast5}}
		\def \mark {instructionCAST}
	\case{\isequal{\currentalgo}{serpent}}
		\highrounds
		\def \mark {instructionSerpent}
 	\otherwise
	\endswitch
\fi

\begin{tikzpicture}[]
 \begin{axis}[width=10cm,height=8cm,
              view={0}{90},
	      grid,
	      enlarge y limits=0.08,
	      enlarge x limits=0.03,
	      y tick label style={anchor=east},
	      xlabel= Instructions,
              ylabel= Rounds,
              every axis label/.style={font=\scriptsize},
              every tick label/.style={font=\scriptsize}, 
	      colormap={custom}{color(0)=(red) color(32)=(yellow) color(64)=(green) color(96)=(cyan) color(128)=(blue)},
              colorbar]
  \addplot3[only marks, mark=\mark,mark size=1.3,scatter,restrict z to domain =1:256] table {\filename};
  \addplot3[only marks, mark=\mark,mark size=1.3,scatter,restrict z to domain =0:0,colormap={custom}{color(0)=(black) color(32)=(black)}] table {\filename};
\end{axis}
\end{tikzpicture}


\end{document}
